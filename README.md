# Домашнее задание к занятию «13-01.md Уязвимости и атаки на информационные системы» - Теплов Михаил 

### Инструкция по выполнению домашнего задания

1. Сделайте fork [репозитория c шаблоном решения](https://github.com/netology-code/sys-pattern-homework) к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw).
2. Выполните клонирование этого репозитория к себе на ПК с помощью команды `git clone`.
3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
   - впишите вверху название занятия и ваши фамилию и имя;
   - в каждом задании добавьте решение в требуемом виде: текст/код/скриншоты/ссылка;
   - для корректного добавления скриншотов воспользуйтесь инструкцией [«Как вставить скриншот в шаблон с решением»](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md);
   - при оформлении используйте возможности языка разметки md. Коротко об этом можно посмотреть в [инструкции по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md).
4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`).
5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
6. Любые вопросы задавайте в разделе «Вопросы по заданию» в личном кабинете.

Желаем успехов в выполнении домашнего задания.

------

### Задание 1

Скачайте и установите виртуальную машину Metasploitable: https://sourceforge.net/projects/metasploitable/.

Это типовая ОС для экспериментов в области информационной безопасности, с которой следует начать при анализе уязвимостей.

Просканируйте эту виртуальную машину, используя **nmap**.

Попробуйте найти уязвимости, которым подвержена эта виртуальная машина.

Сами уязвимости можно поискать на сайте https://www.exploit-db.com/.

Для этого нужно в поиске ввести название сетевой службы, обнаруженной на атакуемой машине, и выбрать подходящие по версии уязвимости.

Ответьте на следующие вопросы:

- Какие сетевые службы в ней разрешены?
### Найденные сетевые службы

В ходе сканирования было обнаружено, что система принимает подключения по большому количеству портов. Основные из них приведены ниже:

| Порт | Протокол | Сервис | Версия |
|------|----------|--------|--------|
| 21   | TCP | FTP | vsftpd 2.3.4 |
| 22   | TCP | SSH | OpenSSH 4.7p1 |
| 23   | TCP | Telnet | telnetd |
| 25   | TCP | SMTP | Postfix |
| 53   | TCP/UDP | DNS | BIND 9.4.2 |
| 80   | TCP | HTTP | Apache 2.2.8 |
| 139  | TCP | NetBIOS | Samba 3.0.20 |
| 445  | TCP | SMB | Samba 3.0.20 |
| 3306 | TCP | MySQL | MySQL 5.0.51a |
| 3632 | TCP | distccd | v1 |
| 5432 | TCP | PostgreSQL | 8.3 |
| 6667 | TCP | IRC | UnrealIRCd |
| 8009 | TCP | AJP | Apache JServ |
| 8180 | TCP | HTTP | Apache Tomcat |
- Какие уязвимости были вами обнаружены? (список со ссылками: достаточно трёх уязвимостей)
### Обнаруженные уязвимости


1. **FTP-сервер vsftpd версии 2.3.4**  
   Данная версия FTP содержит скрытый механизм, позволяющий получить удалённый доступ к системе при использовании специального имени пользователя. Уязвимость позволяет выполнить команды на сервере без прохождения аутентификации.  
   Ссылка: https://www.exploit-db.com/exploits/17491

2. **Samba версии 3.0.20**  
   Уязвимость связана с некорректной обработкой пользовательских данных. Злоумышленник может выполнить произвольные команды с высокими привилегиями, получив полный контроль над системой.  
   Ссылка: https://www.exploit-db.com/exploits/16320

3. **Служба distccd**  
   Сервис распределённой компиляции в данной конфигурации принимает команды без проверки подлинности, что позволяет удалённо выполнять команды на целевой системе.  
   Ссылка: https://www.exploit-db.com/exploits/9915

4. **IRC-сервер UnrealIRCd**  
   Используемая версия IRC-сервера содержит встроенный backdoor, который позволяет удалённо выполнять команды на сервере при подключении к специальному порту.  
   Ссылка: https://www.exploit-db.com/exploits/13853

5. **MySQL версии 5.0.51a**  
   В данной версии базы данных присутствуют уязвимости, позволяющие получить несанкционированный доступ или повысить привилегии при использовании слабых или стандартных учётных данных.  
   Ссылка: https://www.exploit-db.com/exploits/1518
  
*Приведите ответ в свободной форме.*  



### Задание 2

Проведите сканирование Metasploitable в режимах SYN, FIN, Xmas, UDP.

Запишите сеансы сканирования в Wireshark.

Ответьте на следующие вопросы:

- Чем отличаются эти режимы сканирования с точки зрения сетевого трафика?
### Отличия режимов сканирования

#### SYN-сканирование

При SYN-сканировании nmap отправляет TCP-пакет с установленным флагом SYN, имитируя попытку начала TCP-соединения. Если порт на сервере открыт, Metasploitable отвечает пакетом SYN-ACK. В случае закрытого порта сервер отправляет пакет RST. После получения ответа nmap не завершает соединение, а разрывает его.

В Wireshark данный тип сканирования легко определить по большому количеству SYN-пакетов, идущих на разные порты, а также по ответам SYN-ACK и RST.

Отправляется пакет с флагом SYN для установки соединения. Ответ SYN/ACK - порт открыт (После происходит сброс соединения RST). Ответ RST/ACK - порт закрыт.
![1] (https://github.com/mteplov/ls_1/blob/main/1.png)

---

#### FIN-сканирование

FIN-сканирование использует нестандартный подход: вместо запроса на установление соединения отправляется TCP-пакет с флагом FIN. Согласно спецификации TCP, закрытые порты должны отвечать пакетом RST, а открытые — игнорировать такие пакеты.

В Wireshark видно, что для закрытых портов Metasploitable отвечает RST, а для открытых пакеты остаются без ответа. Это позволяет определить состояние портов без попытки установить соединение.

Отправляется пакет с флагом FIN. Ответ RST/ACK - порт закрыт. Если ответа нет - порт открыт|фильтруется.
![2] (https://github.com/mteplov/ls_1/blob/main/2.png)

---

#### Xmas-сканирование

Xmas-сканирование получило своё название из-за использования сразу нескольких TCP-флагов: FIN, PSH и URG. Такие пакеты не используются в нормальной работе сетевых приложений и выглядят подозрительно.

Поведение сервера аналогично FIN-сканированию: закрытые порты отвечают RST, а открытые не отправляют ответ. В Wireshark такие пакеты легко распознать по необычной комбинации TCP-флагов.

Отправляется пакет с флагами FIN/PSH/URG. Ответ RST/ACK - порт закрыт. Если ответа нет - порт открыт|фильтруется.
![3] (https://github.com/mteplov/ls_1/blob/main/3.png)

#### UDP-сканирование

Отправляет пустой UDP заголовок на каждый порт. Ответ ICMP ошибка о недостижимости порта (тип 3, код 3) - порт закрыт. Другие ICMP ошибки недостижимости - порт фильтруется. После нескольких попыток без ответа - порт открыт|фильтруется. Ответ UDP - порт открыт. 

![4] (https://github.com/mteplov/ls_1/blob/main/4.png)



- Как отвечает сервер?

### Сравнение режимов сканирования

| Тип сканирования | Отправляемые пакеты | Ответ сервера | Особенности |
|------------------|---------------------|---------------|-------------|
| SYN | TCP SYN | SYN-ACK или RST | Быстрое и информативное |
| FIN | TCP FIN | RST или нет ответа | Использует особенности TCP |
| Xmas | TCP FIN, PSH, URG | RST или нет ответа | Необычный трафик |
| UDP | UDP | ICMP или нет ответа | Медленное и неточное |


*Приведите ответ в свободной форме.*

